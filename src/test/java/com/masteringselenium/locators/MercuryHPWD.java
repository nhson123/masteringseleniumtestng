package com.masteringselenium.locators;

import com.masteringselenium.DriverFactory;
import com.masteringselenium.locators.factories.MercuryHPFactory;
import com.masteringselenium.locators.factories.MercuryReservationFactory;
import org.apache.commons.io.FileUtils;
import org.openqa.selenium.*;
import org.openqa.selenium.remote.RemoteWebDriver;
import org.testng.annotations.Test;

import java.io.File;
import java.util.concurrent.TimeUnit;
import java.util.logging.Logger;

import static org.testng.Assert.assertTrue;

/** Package: PACKAGE_NAME Generated by: Hoang.Son.Nguyen Generated at: 08.01.2019 2019 */
public class MercuryHPWD extends DriverFactory {
  private Logger  LOGGER = Logger.getLogger(this.getClass().getName());
  MercuryHPFactory mecuryHPFactory;
  WebDriver driver;


  @Test
  public void MerucyHPCheck() throws Exception {
    driver = DriverFactory.getDriver();
    driver.navigate().to("http://newtours.demoaut.com");
    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
    mecuryHPFactory = new MercuryHPFactory();
    LOGGER.info(
        "Logger Name: " + LOGGER.getName() + ", WebElements: " + mecuryHPFactory.countByTagName());
    mecuryHPFactory.highlight();
    assertTrue(mecuryHPFactory.countByTagName() >= 1);
    assertTrue(mecuryHPFactory.logoDisplayed());
    assertTrue(mecuryHPFactory.mouseOutSize()<12);
    assertTrue(mecuryHPFactory.htmlVerDisplay());
    assertTrue(mecuryHPFactory.bannerDisplay());
    assertTrue(mecuryHPFactory.destinationsDisplay());
    assertTrue(mecuryHPFactory.contactDisplay());
    assertTrue(mecuryHPFactory.lasVegasDisplay());
    assertTrue(mecuryHPFactory.registerDisplay());
    assertTrue(mecuryHPFactory.linksDisplay());
    assertTrue(mecuryHPFactory.rightPaneDisplay());
    assertTrue(mecuryHPFactory.toChicagoDisplay());
    assertTrue(mecuryHPFactory.sanfransiscoDisplay());
    mecuryHPFactory.setSanfransiscoDoubleClick();
  }


  @Test
  public void testTakesScreenshot() {
    try {
      File scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);
      FileUtils.copyFile(
          scrFile, new File("C:\\Users\\Hoang.Son.Nguyen\\OneDrive\\Public\\masteringseleniumtestng\\null\\test.png"));
    } catch (Exception e) {
      e.printStackTrace();
    }
  }

  @Test
  public void tableLogin() throws Exception {
    driver = DriverFactory.getDriver();
    driver.navigate().to("http://newtours.demoaut.com");
    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
    mecuryHPFactory = new MercuryHPFactory();
    WebTable loginTable = new WebTable(mecuryHPFactory.loginTable);
    loginTable.setCellEditor(2,2,0,"tutorial");
    loginTable.setCellEditor(3,2,0,"tutorial");
    mecuryHPFactory.signInClick();
    MercuryReservationFactory mercuryReservationFactory = new MercuryReservationFactory();
    mercuryReservationFactory.flightFinderDisplayed();
    assertTrue(driver.getTitle().contains("Find a Flight: Mercury Tours:"));
  }

}
